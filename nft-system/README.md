# å…³å¸çµç­¾ NFT ç”Ÿæˆç³»ç»Ÿ

ğŸ¨ **åŸºäºç¨€æœ‰åº¦æ¨¡æ¿çš„æ‰¹é‡NFTç”Ÿæˆè§£å†³æ–¹æ¡ˆ**

ä¸€ä¸ªåˆ›æ–°çš„NFTç”Ÿæˆç³»ç»Ÿï¼Œä½¿ç”¨ä»…3ä¸ªç²¾ç¾è®¾è®¡çš„æ¨¡æ¿ï¼Œæ™ºèƒ½ç”Ÿæˆ100ä¸ªç‹¬ç‰¹çš„å…³å¸çµç­¾NFTæ”¶è—å“ã€‚é€šè¿‡ç¨€æœ‰åº¦åˆ†çº§å’ŒåŠ¨æ€å†…å®¹å¡«å……ï¼Œå¤§å¹…é™ä½è®¾è®¡æˆæœ¬åŒæ—¶ä¿æŒæ¯ä¸ªNFTçš„ç‹¬ç‰¹æ€§ã€‚

## âœ¨ æ ¸å¿ƒç‰¹è‰²

- ğŸ¯ **é«˜æ•ˆè®¾è®¡**: 3ä¸ªæ¨¡æ¿ç”Ÿæˆ100ä¸ªç‹¬ç‰¹NFTï¼ŒèŠ‚çœ85%è®¾è®¡æˆæœ¬
- ğŸ† **ç¨€æœ‰åº¦ç³»ç»Ÿ**: ä¼ å¥‡(2%) / å²è¯—(9%) / ç¨€æœ‰(89%) ä¸‰çº§åˆ†å¸ƒ
- ğŸ¨ **ç²¾ç¾è®¾è®¡**: ä¸œæ–¹ç¾å­¦ + ç°ä»£è®¾è®¡ï¼Œæ”¯æŒåŠ¨ç”»æ•ˆæœ
- ğŸ”„ **åŠ¨æ€ç”Ÿæˆ**: åŸºäºæ•°æ®åº“å†…å®¹è‡ªåŠ¨å¡«å……ç­¾æ–‡ä¿¡æ¯
- ğŸ“± **å¤šæ ¼å¼æ”¯æŒ**: PNGå›¾ç‰‡ + OpenSeaå…¼å®¹å…ƒæ•°æ®
- ğŸš€ **æ‰¹é‡å¤„ç†**: å¹¶å‘ç”Ÿæˆï¼Œæ”¯æŒå¤§è§„æ¨¡æ‰¹é‡æ“ä½œ

## ğŸ“Š ç¨€æœ‰åº¦åˆ†å¸ƒ

| ç­‰çº§ | æ•°é‡ | æ¯”ä¾‹ | ä¸»é¢˜è‰²å½© | ç‰¹æ®Šæ•ˆæœ |
|------|------|------|----------|----------|
| ä¼ å¥‡ (Legendary) | 2ä¸ª | 2% | å¸ç‹é‡‘è¾‰ | é‡‘è‰²å‘å…‰ã€é¾™çº¹è£…é¥°ã€æ˜Ÿå…‰åŠ¨ç”» |
| å²è¯— (Epic) | 9ä¸ª | 9% | ç´«æ°”ä¸œæ¥ | ç´«è‰²å…‰æ™•ã€ç¥¥äº‘æµ®åŠ¨ã€ç å…‰æ•ˆæœ |
| ç¨€æœ‰ (Rare) | 89ä¸ª | 89% | é’é”‹å¦‚æ„ | æ°´æ³¢çº¹ç†ã€ç«¹å¶è£…é¥°ã€æ·¡é›…å…‰æ³½ |

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

```
nft-system/
â”œâ”€â”€ ğŸ“ config/              # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ template-mapping.json    # æ¨¡æ¿æ˜ å°„é…ç½®
â”‚   â””â”€â”€ rarity-rules.json       # ç¨€æœ‰åº¦è§„åˆ™
â”œâ”€â”€ ğŸ“ templates/           # SVGæ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ legendary.svg           # ä¼ å¥‡çº§æ¨¡æ¿ (é‡‘è‰²ä¸»é¢˜)
â”‚   â”œâ”€â”€ epic.svg               # å²è¯—çº§æ¨¡æ¿ (ç´«è‰²ä¸»é¢˜)
â”‚   â””â”€â”€ rare.svg               # ç¨€æœ‰çº§æ¨¡æ¿ (è“è‰²ä¸»é¢˜)
â”œâ”€â”€ ğŸ“ src/                 # æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ data-fetcher.js         # æ•°æ®åº“æŸ¥è¯¢
â”‚   â”œâ”€â”€ template-engine.js      # æ¨¡æ¿æ¸²æŸ“å¼•æ“
â”‚   â”œâ”€â”€ image-generator.js      # å›¾åƒç”Ÿæˆå™¨
â”‚   â””â”€â”€ metadata-generator.js   # å…ƒæ•°æ®ç”Ÿæˆå™¨
â”œâ”€â”€ ğŸ“ scripts/             # æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ generate-all.js         # æ‰¹é‡ç”Ÿæˆæ‰€æœ‰NFT
â”‚   â””â”€â”€ generate-preview.js     # ç”Ÿæˆé¢„è§ˆæ ·æœ¬
â””â”€â”€ ğŸ“ output/              # è¾“å‡ºç»“æœ
    â”œâ”€â”€ images/                 # NFTå›¾ç‰‡æ–‡ä»¶
    â”œâ”€â”€ metadata/               # å…ƒæ•°æ®JSONæ–‡ä»¶
    â””â”€â”€ collection.json         # é›†åˆå…ƒæ•°æ®
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env.local
# ç¼–è¾‘ .env.local å¡«å…¥Supabaseå‡­æ®
```

**å¿…éœ€ç¯å¢ƒå˜é‡**:
```bash
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

### 2. å­—ä½“å‡†å¤‡

ä¸‹è½½å¹¶æ”¾ç½®ä¸­æ–‡å­—ä½“åˆ° `assets/fonts/` ç›®å½•ï¼š
- `HuaWenXingKai.ttf` (åæ–‡è¡Œæ¥·)
- `HuaWenZhongSong.ttf` (åæ–‡ä¸­å®‹)

### 3. ç”Ÿæˆé¢„è§ˆæ ·æœ¬

```bash
# ç”Ÿæˆä»£è¡¨æ€§é¢„è§ˆNFTï¼Œç”¨äºæµ‹è¯•æ¨¡æ¿æ•ˆæœ
npm run generate-preview
```

### 4. æ‰¹é‡ç”Ÿæˆæ‰€æœ‰NFT

```bash
# ä¸€é”®ç”Ÿæˆå…¨éƒ¨100ä¸ªNFT
npm run generate-all
```

## ğŸ¨ æ¨¡æ¿å®šåˆ¶

### ä¿®æ”¹é¢œè‰²ä¸»é¢˜

ç¼–è¾‘ `config/template-mapping.json`:

```json
{
  "legendary": {
    "colorScheme": {
      "primary": "#FFD700",    // ä¸»è‰²è°ƒ
      "secondary": "#8B0000",  // è¾…åŠ©è‰²
      "accent": "#FFA500"      // å¼ºè°ƒè‰²
    }
  }
}
```

### è°ƒæ•´ç¨€æœ‰åº¦è§„åˆ™

ç¼–è¾‘ `config/rarity-rules.json`:

```json
{
  "rarityRules": {
    "mapping": {
      "legendary": {
        "criteria": {
          "fortune_level": ["excellent"],
          "special_slips": [1, 42]  // æŒ‡å®šç‰¹æ®Šç­¾æ–‡
        }
      }
    }
  }
}
```

### è‡ªå®šä¹‰æ¨¡æ¿è®¾è®¡

ç›´æ¥ç¼–è¾‘SVGæ¨¡æ¿æ–‡ä»¶ï¼š
- `templates/legendary.svg` - ä¼ å¥‡çº§è®¾è®¡
- `templates/epic.svg` - å²è¯—çº§è®¾è®¡  
- `templates/rare.svg` - ç¨€æœ‰çº§è®¾è®¡

ä½¿ç”¨Handlebarsè¯­æ³•æ’å…¥åŠ¨æ€å†…å®¹ï¼š
```svg
<!-- ç­¾æ–‡æ ‡é¢˜ -->
<text>{{title}}</text>

<!-- ç­¾å· -->
<text>{{formatSlipNumber slipNumber}}</text>

<!-- å‰å‡¶ç­‰çº§ -->
<text>{{formatFortuneLevel fortuneLevel}}</text>
```

## ğŸ“‹ å¯ç”¨è„šæœ¬

| å‘½ä»¤ | åŠŸèƒ½ | è¯´æ˜ |
|------|------|------|
| `npm run generate-all` | ç”Ÿæˆæ‰€æœ‰NFT | æ‰¹é‡ç”Ÿæˆ100ä¸ªå®Œæ•´NFT |
| `npm run generate-preview` | ç”Ÿæˆé¢„è§ˆæ ·æœ¬ | ç”Ÿæˆä»£è¡¨æ€§æ ·æœ¬ç”¨äºæµ‹è¯• |
| `npm run clean-output` | æ¸…ç†è¾“å‡ºç›®å½• | åˆ é™¤æ‰€æœ‰ç”Ÿæˆçš„æ–‡ä»¶ |
| `npm run verify-output` | éªŒè¯è¾“å‡ºè´¨é‡ | æ£€æŸ¥ç”Ÿæˆæ–‡ä»¶çš„å®Œæ•´æ€§ |

## ğŸ¯ è¾“å‡ºç»“æœ

### ç”Ÿæˆçš„æ–‡ä»¶ç»“æ„
```
output/
â”œâ”€â”€ images/                 # NFTå›¾ç‰‡ (400x600 PNG)
â”‚   â”œâ”€â”€ guandi-1.png       # ç¬¬1ç­¾NFTå›¾ç‰‡
â”‚   â”œâ”€â”€ guandi-2.png       # ç¬¬2ç­¾NFTå›¾ç‰‡
â”‚   â””â”€â”€ ...                # å…¶ä»–ç­¾æ–‡å›¾ç‰‡
â”œâ”€â”€ metadata/              # OpenSeaæ ‡å‡†å…ƒæ•°æ®
â”‚   â”œâ”€â”€ 1.json            # ç¬¬1ç­¾å…ƒæ•°æ®
â”‚   â”œâ”€â”€ 2.json            # ç¬¬2ç­¾å…ƒæ•°æ®
â”‚   â””â”€â”€ ...               # å…¶ä»–ç­¾æ–‡å…ƒæ•°æ®
â””â”€â”€ collection.json        # æ•´ä¸ªé›†åˆçš„å…ƒæ•°æ®
```

### å…ƒæ•°æ®æ ¼å¼ç¤ºä¾‹
```json
{
  "name": "å…³å¸çµç­¾ #1",
  "description": "å•è’™æ­£ç¥­ç¶ - ä¼ ç»Ÿå…³å¸çµç­¾çš„æ•°å­—åŒ–æ”¶è—å“...",
  "image": "https://astrozi.com/nft/guandi/images/guandi-1.png",
  "attributes": [
    {
      "trait_type": "ç­¾å·",
      "value": 1
    },
    {
      "trait_type": "ç¨€æœ‰åº¦",
      "value": "ä¼ å¥‡"
    },
    {
      "trait_type": "å‰å‡¶ç­‰çº§",
      "value": "ç”²ç”² å¤§å‰"
    }
  ],
  "properties": {
    "rarity_score": 10000,
    "slip_content": "ç­¾æ–‡å†…å®¹...",
    "creator": "AstroZi"
  }
}
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### å¹¶å‘æ§åˆ¶
ç³»ç»Ÿè‡ªåŠ¨é™åˆ¶å¹¶å‘æ•°é‡ï¼Œé¿å…å†…å­˜æº¢å‡ºï¼š
```javascript
const concurrencyLimit = 3; // å¯åœ¨é…ç½®ä¸­è°ƒæ•´
```

### å†…å­˜ç®¡ç†
- è‡ªåŠ¨åƒåœ¾å›æ”¶
- æ‰¹æ¬¡å¤„ç†é¿å…å†…å­˜ç§¯ç´¯
- å¤§å‹å›¾åƒå¯¹è±¡åŠæ—¶é‡Šæ”¾

### å¤„ç†é€Ÿåº¦
- é¢„æœŸé€Ÿåº¦: ~2-3ç§’/NFT
- æ€»è€—æ—¶: ~5-8åˆ†é’Ÿ(100ä¸ªNFT)
- æ”¯æŒæ–­ç‚¹ç»­ä¼ 

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. å­—ä½“æ˜¾ç¤ºå¼‚å¸¸**
```bash
# ç¡®ä¿å­—ä½“æ–‡ä»¶å­˜åœ¨
ls assets/fonts/
# åº”è¯¥çœ‹åˆ°: HuaWenXingKai.ttf, HuaWenZhongSong.ttf
```

**2. æ•°æ®åº“è¿æ¥å¤±è´¥**
```bash
# æ£€æŸ¥ç¯å¢ƒå˜é‡
echo $NEXT_PUBLIC_SUPABASE_URL
echo $SUPABASE_SERVICE_ROLE_KEY
```

**3. å†…å­˜ä¸è¶³é”™è¯¯**
```bash
# å¢åŠ Node.jså†…å­˜é™åˆ¶
node --max-old-space-size=4096 scripts/generate-all.js
```

**4. SVGæ¸²æŸ“å¼‚å¸¸**
- æ£€æŸ¥SVGæ¨¡æ¿è¯­æ³•
- ç¡®ä¿Handlebarsè¡¨è¾¾å¼æ­£ç¡®
- éªŒè¯CSSæ ·å¼å…¼å®¹æ€§

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼š
```bash
DEBUG=* npm run generate-all
```

ç”Ÿæˆå•ä¸ªNFTç”¨äºè°ƒè¯•ï¼š
```bash
node -e "
const generator = new (require('./src/batch-processor'));
generator.generateSingleNFT(slipData, 0);
"
```

## ğŸš€ éƒ¨ç½²åˆ°ç”Ÿäº§

### 1. IPFSéƒ¨ç½²
```bash
# ä½¿ç”¨Pinataæˆ–å…¶ä»–IPFSæœåŠ¡
ipfs add -r output/images/
ipfs add -r output/metadata/
```

### 2. CDNéƒ¨ç½²
```bash
# ä¸Šä¼ åˆ°AWS S3 / Cloudflare / é˜¿é‡Œäº‘OSS
aws s3 sync output/ s3://your-nft-bucket/guandi/
```

### 3. æ™ºèƒ½åˆçº¦é…ç½®
```solidity
// è®¾ç½®baseURIæŒ‡å‘éƒ¨ç½²çš„å…ƒæ•°æ®
function setBaseURI(string memory baseURI) external onlyOwner {
    _baseTokenURI = baseURI; 
    // ä¾‹å¦‚: https://astrozi.com/nft/guandi/metadata/
}
```

## ğŸ“ˆ æ‰©å±•åŠŸèƒ½

### æ·»åŠ æ–°çš„ç¨€æœ‰åº¦ç­‰çº§
1. åœ¨ `config/rarity-rules.json` æ·»åŠ æ–°ç­‰çº§
2. åˆ›å»ºå¯¹åº”çš„SVGæ¨¡æ¿æ–‡ä»¶
3. æ›´æ–°æ¨¡æ¿æ˜ å°„é…ç½®

### æ”¯æŒåŠ¨ç”»NFT
1. æ·»åŠ GIF/MP4ç”Ÿæˆé€»è¾‘
2. åœ¨SVGä¸­ä½¿ç”¨ `<animate>` æ ‡ç­¾
3. é…ç½®å…ƒæ•°æ® `animation_url` å­—æ®µ

### å¤šè¯­è¨€æ”¯æŒ
ç³»ç»Ÿå·²å†…ç½®ä¸­è‹±æ–‡æ”¯æŒï¼Œå¯æ‰©å±•å…¶ä»–è¯­è¨€ï¼š
1. æ·»åŠ ç¿»è¯‘æ•°æ®åˆ°æ•°æ®åº“
2. ä¿®æ”¹ `data-fetcher.js` æ”¯æŒè¯­è¨€å‚æ•°
3. åˆ›å»ºå¯¹åº”è¯­è¨€çš„æ¨¡æ¿

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤ä»£ç 
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. åˆ›å»ºPull Request

### æŠ¥å‘Šé—®é¢˜
åœ¨GitHub Issuesä¸­æäº¤é—®é¢˜æ—¶ï¼Œè¯·åŒ…å«ï¼š
- é”™è¯¯è¯¦ç»†æè¿°
- å¤ç°æ­¥éª¤
- ç¯å¢ƒä¿¡æ¯ (Node.jsç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿç­‰)
- ç›¸å…³æ—¥å¿—è¾“å‡º

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ”— ç›¸å…³é“¾æ¥

- [AstroZi å®˜ç½‘](https://astrozi.com)
- [é¡¹ç›®æ–‡æ¡£](https://docs.astrozi.com/nft)
- [Discord ç¤¾åŒº](https://discord.gg/astrozi)
- [Twitter](https://twitter.com/astroziai)

---

<div align="center">
  <strong>ğŸŠ æ­å–œï¼ä½ å·²ç»æŒæ¡äº†é«˜æ•ˆçš„NFTæ‰¹é‡ç”ŸæˆæŠ€æœ¯ï¼</strong><br>
  <em>3ä¸ªæ¨¡æ¿ Ã— 100ä¸ªç­¾æ–‡ = æ— é™å¯èƒ½</em>
</div>