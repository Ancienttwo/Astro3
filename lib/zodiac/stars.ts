export type StarName =
  // 14 主星
  | '紫微' | '天机' | '太阳' | '武曲' | '天同' | '廉贞'
  | '天府' | '太阴' | '贪狼' | '巨门' | '天相' | '天梁'
  | '七杀' | '破军'
  // 辅星
  | '左辅' | '右弼' | '文昌' | '文曲' | '天魁' | '天钺' | '禄存'
  | '天喜' | '红鸾' | '天姚'
  // 煞星
  | '擎羊' | '陀罗' | '火星' | '铃星' | '地空' | '地劫' | '天刑'
  // 四化
  | '天马' | '化禄' | '化权' | '化科' | '化忌';

export type StarCategory = '北斗' | '南斗' | '中天';
export type StarType = '主星' | '辅星' | '煞星' | '化星';
export type StarBrightness = '庙' | '旺' | '得' | '利' | '平' | '不' | '陷';

export interface StarDefinition {
  name: StarName;
  type: StarType;
  category: StarCategory;
  element: '金' | '木' | '水' | '火' | '土';
}

export const STARS: Record<string, StarDefinition> = {
  // -- 北斗
  '紫微': { name: '紫微', type: '主星', category: '北斗', element: '土' },
  '贪狼': { name: '贪狼', type: '主星', category: '北斗', element: '木' },
  '武曲': { name: '武曲', type: '主星', category: '北斗', element: '金' },
  '巨门': { name: '巨门', type: '主星', category: '北斗', element: '水' },
  '廉贞': { name: '廉贞', type: '主星', category: '北斗', element: '火' },
  '破军': { name: '破军', type: '主星', category: '北斗', element: '水' },
  '左辅': { name: '左辅', type: '辅星', category: '北斗', element: '土' },
  '右弼': { name: '右弼', type: '辅星', category: '北斗', element: '水' },
  '擎羊': { name: '擎羊', type: '煞星', category: '北斗', element: '金' },
  '陀罗': { name: '陀罗', type: '煞星', category: '北斗', element: '金' },
  '文曲': { name: '文曲', type: '辅星', category: '北斗', element: '水' },
  '禄存': { name: '禄存', type: '辅星', category: '北斗', element: '土' },

  // -- 南斗
  '天府': { name: '天府', type: '主星', category: '南斗', element: '土' },
  '天机': { name: '天机', type: '主星', category: '南斗', element: '木' },
  '天相': { name: '天相', type: '主星', category: '南斗', element: '水' },
  '天梁': { name: '天梁', type: '主星', category: '南斗', element: '土' },
  '天同': { name: '天同', type: '主星', category: '南斗', element: '水' },
  '七杀': { name: '七杀', type: '主星', category: '南斗', element: '金' },
  '文昌': { name: '文昌', type: '辅星', category: '南斗', element: '金' },
  '火星': { name: '火星', type: '煞星', category: '南斗', element: '火' },
  '铃星': { name: '铃星', type: '煞星', category: '南斗', element: '火' },
  
  // -- 中天
  '太阳': { name: '太阳', type: '主星', category: '中天', element: '火' },
  '太阴': { name: '太阴', type: '主星', category: '中天', element: '水' },
  '天魁': { name: '天魁', type: '辅星', category: '中天', element: '火' },
  '天钺': { name: '天钺', type: '辅星', category: '中天', element: '火' },
  '天喜': { name: '天喜', type: '辅星', category: '中天', element: '水' },
  '红鸾': { name: '红鸾', type: '辅星', category: '中天', element: '水' },
  '天姚': { name: '天姚', type: '辅星', category: '中天', element: '水' },
  '天刑': { name: '天刑', type: '煞星', category: '中天', element: '火' },
  '地空': { name: '地空', type: '煞星', category: '中天', element: '火' },
  '地劫': { name: '地劫', type: '煞星', category: '中天', element: '火' },
  '天马': { name: '天马', type: '辅星', category: '中天', element: '火' },
  '化禄': { name: '化禄', type: '化星', category: '中天', element: '土' },
  '化权': { name: '化权', type: '化星', category: '中天', element: '木' },
  '化科': { name: '化科', type: '化星', category: '中天', element: '水' },
  '化忌': { name: '化忌', type: '化星', category: '中天', element: '水' },
}; 

// 星曜在各地支的亮度等级映射表
export const STAR_BRIGHTNESS_MAP: Record<StarName, Record<string, StarBrightness>> = {
  // 14主星 - 根据紫微全书庙旺亮度表更新
  '紫微': {
    '子': '平', '丑': '庙', '寅': '旺', '卯': '旺', '辰': '得', '巳': '旺',
    '午': '庙', '未': '庙', '申': '旺', '酉': '旺', '戌': '得', '亥': '旺'
  },
  '天机': {
    '子': '庙', '丑': '陷', '寅': '得', '卯': '旺', '辰': '利', '巳': '平',
    '午': '庙', '未': '陷', '申': '得', '酉': '旺', '戌': '利', '亥': '平'
  },
  '太阳': {
    '子': '陷', '丑': '不', '寅': '旺', '卯': '庙', '辰': '旺', '巳': '旺',
    '午': '旺', '未': '得', '申': '得', '酉': '平', '戌': '不', '亥': '陷'
  },
  '武曲': {
    '子': '旺', '丑': '庙', '寅': '得', '卯': '利', '辰': '庙', '巳': '平',
    '午': '旺', '未': '庙', '申': '得', '酉': '利', '戌': '庙', '亥': '平'
  },
  '天同': {
    '子': '旺', '丑': '不', '寅': '利', '卯': '平', '辰': '平', '巳': '庙',
    '午': '陷', '未': '不', '申': '旺', '酉': '平', '戌': '平', '亥': '庙'
  },
  '廉贞': {
    '子': '平', '丑': '利', '寅': '庙', '卯': '平', '辰': '利', '巳': '陷',
    '午': '平', '未': '利', '申': '庙', '酉': '平', '戌': '利', '亥': '陷'
  },
  '天府': {
    '子': '庙', '丑': '庙', '寅': '庙', '卯': '得', '辰': '庙', '巳': '得',
    '午': '旺', '未': '庙', '申': '旺', '酉': '旺', '戌': '庙', '亥': '得'
  },
  '太阴': {
    '子': '庙', '丑': '庙', '寅': '旺', '卯': '陷', '辰': '陷', '巳': '陷',
    '午': '不', '未': '不', '申': '利', '酉': '旺', '戌': '旺', '亥': '庙'
  },
  '贪狼': {
    '子': '旺', '丑': '庙', '寅': '平', '卯': '利', '辰': '庙', '巳': '陷',
    '午': '旺', '未': '庙', '申': '平', '酉': '利', '戌': '庙', '亥': '陷'
  },
  '巨门': {
    '子': '旺', '丑': '不', '寅': '庙', '卯': '庙', '辰': '陷', '巳': '旺',
    '午': '旺', '未': '不', '申': '庙', '酉': '庙', '戌': '陷', '亥': '旺'
  },
  '天相': {
    '子': '庙', '丑': '庙', '寅': '庙', '卯': '陷', '辰': '得', '巳': '得',
    '午': '庙', '未': '得', '申': '庙', '酉': '陷', '戌': '得', '亥': '得'
  },
  '天梁': {
    '子': '庙', '丑': '旺', '寅': '庙', '卯': '庙', '辰': '庙', '巳': '得',
    '午': '庙', '未': '旺', '申': '陷', '酉': '得', '戌': '庙', '亥': '得'
  },
  '七杀': {
    '子': '旺', '丑': '庙', '寅': '庙', '卯': '旺', '辰': '庙', '巳': '平',
    '午': '旺', '未': '庙', '申': '庙', '酉': '旺', '戌': '庙', '亥': '平'
  },
  '破军': {
    '子': '庙', '丑': '旺', '寅': '得', '卯': '陷', '辰': '旺', '巳': '平',
    '午': '庙', '未': '旺', '申': '得', '酉': '陷', '戌': '旺', '亥': '平'
  },

  // 辅星 - 一般亮度为'得'
  '左辅': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '右弼': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '文昌': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '文曲': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '天魁': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '天钺': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '禄存': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '天喜': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '红鸾': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '天姚': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },
  '天马': {
    '子': '得', '丑': '得', '寅': '得', '卯': '得', '辰': '得', '巳': '得',
    '午': '得', '未': '得', '申': '得', '酉': '得', '戌': '得', '亥': '得'
  },

  // 煞星 - 一般亮度为'平'
  '擎羊': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },
  '陀罗': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },
  '火星': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },
  '铃星': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },
  '地空': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },
  '地劫': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },
  '天刑': {
    '子': '平', '丑': '平', '寅': '平', '卯': '平', '辰': '平', '巳': '平',
    '午': '平', '未': '平', '申': '平', '酉': '平', '戌': '平', '亥': '平'
  },

  // 四化星 - 一般亮度为'利'
  '化禄': {
    '子': '利', '丑': '利', '寅': '利', '卯': '利', '辰': '利', '巳': '利',
    '午': '利', '未': '利', '申': '利', '酉': '利', '戌': '利', '亥': '利'
  },
  '化权': {
    '子': '利', '丑': '利', '寅': '利', '卯': '利', '辰': '利', '巳': '利',
    '午': '利', '未': '利', '申': '利', '酉': '利', '戌': '利', '亥': '利'
  },
  '化科': {
    '子': '利', '丑': '利', '寅': '利', '卯': '利', '辰': '利', '巳': '利',
    '午': '利', '未': '利', '申': '利', '酉': '利', '戌': '利', '亥': '利'
  },
  '化忌': {
    '子': '利', '丑': '利', '寅': '利', '卯': '利', '辰': '利', '巳': '利',
    '午': '利', '未': '利', '申': '利', '酉': '利', '戌': '利', '亥': '利'
  },
};

// 获取星曜在指定地支的亮度
export function getStarBrightness(starName: StarName, branch: string): StarBrightness {
  const brightnessMap = STAR_BRIGHTNESS_MAP[starName];
  if (!brightnessMap) {
    return '平'; // 默认亮度
  }
  return brightnessMap[branch] || '平';
} 