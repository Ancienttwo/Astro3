#!/bin/bash

# MCP Command Wrapper for Context7
# This script provides the /mcp command functionality

echo "Context7 MCP Status"
echo "==================="
echo ""

# Check if servers are actually loaded in Claude
if ls ~/Library/Logs/Claude/mcp-server-*.log 2>/dev/null | grep -q context7; then
  echo "‚úÖ MCP Servers Active:"
else
  echo "‚ö†Ô∏è  MCP Servers Configured (restart Claude Desktop to activate):"
fi

echo "  ‚Ä¢ context7 - Sequential MCP for code analysis"
echo "  ‚Ä¢ filesystem - File system operations"  
echo "  ‚Ä¢ github - GitHub API operations"
echo "  ‚Ä¢ @magicuidesign/mcp - MagicUI components"
echo ""
echo "üìç Configuration:"
echo "  ~/Library/Application Support/Claude/claude_desktop_config.json"
echo ""
echo "üîß Quick Actions:"
echo "  ‚Ä¢ Diagnose issues: node diagnose-mcp.js"
echo "  ‚Ä¢ Test workflows: node test-mcp.js"
echo "  ‚Ä¢ View logs: tail -f ~/Library/Logs/Claude/mcp-server-context7.log"
echo ""

# Check last error in log
if [ -f ~/Library/Logs/Claude/mcp-server-context7.log ]; then
  LAST_ERROR=$(grep -i error ~/Library/Logs/Claude/mcp-server-context7.log | tail -1)
  if [ ! -z "$LAST_ERROR" ]; then
    echo "‚ö†Ô∏è  Last error in log:"
    echo "  ${LAST_ERROR:0:80}..."
    echo ""
  fi
fi

echo "üí° IMPORTANT: Restart Claude Desktop after configuration changes!"