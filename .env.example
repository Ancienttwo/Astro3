# ===========================================
# AstroZi 统一配置架构环境变量
# 复制此文件为 .env.local 并填入真实的配置值
# ===========================================

# 部署配置 (必须设置)
NEXT_PUBLIC_DEPLOYMENT_TARGET=unified-main
NEXT_PUBLIC_APP_MODE=unified
NEXT_PUBLIC_SUPPORTED_LANGUAGES=zh,en
NEXT_PUBLIC_DEFAULT_LANGUAGE=zh
NEXT_PUBLIC_BASE_URL=https://astrozi.com

# Supabase配置 (必须)
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key_here  
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here
SUPABASE_REPLICA_URL=
SUPABASE_REPLICA_KEY=

# WalletConnect配置 (Web3/统一版本需要)
NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID=your_walletconnect_project_id
NEXT_PUBLIC_PRIVY_APP_ID=your_privy_app_id
PRIVY_APP_SECRET=your_privy_app_secret

# Stripe配置 (Web2/统一版本需要)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here
STRIPE_SECRET_KEY=your_stripe_secret_key_here

# SiliconFlow AI配置 (用于AI解读服务 - Qwen3模型)
SILICONFLOW_API_KEY=your_siliconflow_api_key_here
SILICONFLOW_BASE_URL=https://api.siliconflow.com/v1
SILICONFLOW_MODEL=Qwen/Qwen2.5-72B-Instruct

# LangChain命理Agent配置
ENABLE_FORTUNE_AGENT=false  # 设为true启用命理Agent
FORTUNE_MODEL=qwen235b  # 可选: deepseek, qwen235b, qwen30b, qwen72b, qwen32b
EMBEDDING_MODEL=Qwen/Qwen3-Embedding-8B  # Qwen3最新embedding模型

# AI解读服务配置 (Phase 2)
AI_TIMEOUT_MS=30000
AI_PROVIDER=siliconflow

# 阿里云邮件服务配置
ALIYUN_EMAIL_REGION=cn-hangzhou
ALIYUN_ACCESS_KEY_ID=your_aliyun_access_key_id
ALIYUN_ACCESS_KEY_SECRET=your_aliyun_access_key_secret
ALIYUN_EMAIL_FROM_ADDRESS=noreply@astrozi.ai
ALIYUN_EMAIL_FROM_NAME=AstroZi
ALIYUN_EMAIL_REPLY_TO=support@astrozi.ai
ALIYUN_EMAIL_DOMAIN=astrozi.ai

# 通用SMTP配置 (阿里云专用SMTP凭证)
SMTP_HOST=smtpdm.aliyun.com
SMTP_PORT=465
SMTP_USER=your_aliyun_smtp_username  # 从阿里云邮件控制台获取
SMTP_PASS=your_aliyun_smtp_password  # 从阿里云邮件控制台获取
SMTP_FROM=noreply@astrozi.ai
SMTP_REPLY_TO=cs@astrozi.ai

# Redis配置 (生产环境必填)
# 生产环境要求提供统一的连接URL，例如：redis://default:password@host:port
REDIS_URL=redis://default:your_redis_password@localhost:6379
# 兼容旧配置（本地开发可用）
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password

# Upstash Redis（Edge Runtime 用于网关缓存/限流）
UPSTASH_REDIS_REST_URL=your_upstash_rest_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_rest_token

# BullMQ 队列（可复用 REDIS_URL）。运行 worker：
# pnpm tsx scripts/knowledge-worker.ts

# Vercel Edge Config（可选，用于动态调整TTL/限流阈值）
# 在 Vercel 上自动注入 EDGE_CONFIG 环境变量
# 自定义键：
# - rate_limit_default_limit
# - rate_limit_default_window
# - cache_ttl_default
# - cache_ttl_fortune
# - cache_ttl_astrology
# - enable_gateway_cache
EDGE_CONFIG=

# 分析和监控 (生产环境)
NEXT_PUBLIC_GA_ID=your_google_analytics_id
SENTRY_DSN=your_sentry_dsn

# 开发环境
NODE_ENV=development

# 数据库连接池（可选）
DB_POOL_MAX=20
DB_POOL_MIN=5
DB_ACQUIRE_TIMEOUT=60000
DB_IDLE_TIMEOUT=600000
DB_REAP_INTERVAL=1000

# ==============================
# External connectors (optional)
# ==============================
# Notion API
NOTION_TOKEN=secret_...
NOTION_DATABASE_ID=

# Google Drive (Service Account)
GDRIVE_SERVICE_ACCOUNT_EMAIL=
GDRIVE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIE...\n-----END PRIVATE KEY-----\n"
# Optional: impersonate a workspace user (must be allowed in domain-wide delegation)
GDRIVE_IMPERSONATE_SUBJECT=

# ===========================================
# 不同部署目标的配置示例
# ===========================================

# Web3英文版 (astrozi.ai):
# NEXT_PUBLIC_DEPLOYMENT_TARGET=web3-global
# NEXT_PUBLIC_APP_MODE=web3
# NEXT_PUBLIC_SUPPORTED_LANGUAGES=en
# NEXT_PUBLIC_DEFAULT_LANGUAGE=en
# NEXT_PUBLIC_BASE_URL=https://astrozi.ai

# Web2多语言版 (astrozi.app):  
# NEXT_PUBLIC_DEPLOYMENT_TARGET=web2-global
# NEXT_PUBLIC_APP_MODE=web2
# NEXT_PUBLIC_SUPPORTED_LANGUAGES=en,zh,ja,ko,es,fr
# NEXT_PUBLIC_DEFAULT_LANGUAGE=en
# NEXT_PUBLIC_BASE_URL=https://astrozi.app

# 统一版本 (astrozi.com):
# NEXT_PUBLIC_DEPLOYMENT_TARGET=unified-main
# NEXT_PUBLIC_APP_MODE=unified
# NEXT_PUBLIC_SUPPORTED_LANGUAGES=zh,en
# NEXT_PUBLIC_DEFAULT_LANGUAGE=zh
# NEXT_PUBLIC_BASE_URL=https://astrozi.com
