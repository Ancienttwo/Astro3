# ç´«å¾®æ–—æ•° Web ç‰ˆæœ¬ V2 - 100% UI è¿˜åŸ

**åŸºäº `ref/ziwei-ui` + `ref/ziwei-core` å®Œå…¨å¤åˆ»çš„ React + Tailwind CSS ç‰ˆæœ¬**

## ğŸ“ é¡¹ç›®ç»“æ„

```
components/ziwei-v2/
â”œâ”€â”€ types.ts              # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ PalaceCard.tsx        # å®«ä½å¡ç‰‡ç»„ä»¶ï¼ˆæ˜Ÿæ›œç«–æ’ã€å››åŒ–æ ‡è®°ï¼‰
â”œâ”€â”€ CenterGrid.tsx        # ä¸­å®« 2Ã—2 ç»„ä»¶ï¼ˆå…«å­—ã€å¤§è¿ï¼‰
â”œâ”€â”€ ZiweiChart.tsx        # ä¸»ç»„ä»¶ï¼ˆ12å®«ä½ + ä¸­å®«å¸ƒå±€ï¼‰
â”œâ”€â”€ ziwei.css             # å®Œæ•´æ ·å¼è¡¨ï¼ˆ100% è¿˜åŸï¼‰
â”œâ”€â”€ index.ts              # ç»„ä»¶å¯¼å‡º
â””â”€â”€ README.md             # æœ¬æ–‡æ¡£

lib/ziwei/
â””â”€â”€ integration-v2.ts     # ziwei-core ç®—æ³•é›†æˆé€‚é…å™¨

app/ziwei-new/
â””â”€â”€ page.tsx              # æ¼”ç¤ºé¡µé¢
```

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… 100% UI è¿˜åŸåŠŸèƒ½æ¸…å•

1. **å®«ä½å¡ç‰‡ï¼ˆPalaceCardï¼‰**
   - âœ… æ˜Ÿæ›œç«–æ’æ˜¾ç¤ºï¼ˆä¼ ç»Ÿå‘½ç›˜é£æ ¼ï¼‰
   - âœ… è›‡å½¢æ’åˆ—ç®—æ³•ï¼ˆè¡Œå¥‡æ•°æ­£åºï¼Œå¶æ•°é€†åºï¼‰
   - âœ… ä¸‰ç±»å››åŒ–æ ‡è®°ï¼ˆç”Ÿå¹´/å‘å¿ƒ/ç¦»å¿ƒï¼‰
   - âœ… äº®åº¦æ˜¾ç¤ºï¼ˆåº™/æ—º/å¾—/åˆ©/å¹³/ä¸/é™·ï¼‰
   - âœ… ç‰¹æ®Šæ ‡è®°ï¼ˆèº«å®«ã€æ¥å› å®«ï¼‰
   - âœ… å¤§è¿/æµå¹´/æµæœˆåŠ¨æ€æ ‡ç­¾
   - âœ… å®«ä½ç‚¹å‡»é«˜äº®

2. **ä¸­å®«ä¿¡æ¯ï¼ˆCenterGridï¼‰**
   - âœ… åŸºæœ¬ä¿¡æ¯ï¼ˆå§“åã€æ€§åˆ«ã€äº”è¡Œå±€ï¼‰
   - âœ… å…¬å†/å†œå†æ—¥æœŸæ—¶é—´
   - âœ… å‘½ä¸»ã€èº«ä¸»ã€æ–—å›
   - âœ… å…«å­—å››æŸ±æ˜¾ç¤ºï¼ˆå¸¦åç¥ï¼‰
   - âœ… å…«ä¸ªå¤§è¿åˆ—è¡¨
   - âœ… èµ·è¿ä¿¡æ¯
   - âœ… å¯æŠ˜å /å±•å¼€

3. **ä¸»å›¾è¡¨ï¼ˆZiweiChartï¼‰**
   - âœ… CSS Grid 4Ã—4 å¸ƒå±€
   - âœ… 12 å®«ä½ç²¾ç¡®å®šä½
   - âœ… å“åº”å¼è®¾è®¡
   - âœ… å¤§è¿/æµå¹´é€‰æ‹©å™¨è”åŠ¨
   - âœ… å››åŒ–é£å®«ç®­å¤´ï¼ˆTODOï¼‰

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è®¿é—®æ¼”ç¤ºé¡µé¢

```bash
npm run dev
```

è®¿é—® `http://localhost:3000/ziwei-new`

### 2. åœ¨é¡¹ç›®ä¸­ä½¿ç”¨

```tsx
import { ZiweiChart } from '@/components/ziwei-v2'
import { generateWebZiweiChart } from '@/lib/ziwei/integration-v2'

// ç”Ÿæˆå‘½ç›˜æ•°æ®
const chartData = await generateWebZiweiChart({
  year: 1989,
  month: 1,
  day: 2,
  hour: 19,
  gender: 'female',
  isLunar: false,
  name: 'æµ‹è¯•ç”¨æˆ·'
})

// æ¸²æŸ“ç»„ä»¶
<ZiweiChart
  chartData={chartData}
  activePalace={activePalace}
  onPalaceClick={(branch) => setActivePalace(branch)}
/>
```

## ğŸ“Š æ˜Ÿæ›œé¢œè‰²ç³»ç»Ÿ

**ç²¾ç¡®è¿˜åŸé…è‰²æ–¹æ¡ˆ**ï¼š

| æ˜Ÿæ›œç±»å‹ | é¢œè‰² | Hex å€¼ | è¯´æ˜ |
|---------|------|--------|------|
| 14ä¸»æ˜Ÿ | æ·±ç´«è‰² | `#3D0B5B` | ç´«å¾®ã€å¤©æœºã€å¤ªé˜³ç­‰ |
| æ–‡æ˜Œæ›²å·¦è¾…å³å¼¼ | çº¢è‰² | `#EF4444` | å››å¤§è¾…æ˜Ÿ |
| ç¦„å­˜å¤©é©¬å¤©é­å¤©é’º | é’ç»¿è‰² | `#10B981` | å‰æ˜Ÿ |
| æ¡ƒèŠ±æ˜Ÿ | ç²‰çº¢è‰² | `#F06292` | çº¢é¸¾ã€å¤©å–œç­‰ |
| ç…æ˜Ÿ | ç°è‰² | `#6B7280` | åœ°ç©ºã€åœ°åŠ«ç­‰ |

**å››åŒ–é¢œè‰²**ï¼š

| å››åŒ– | é¢œè‰² | Hex å€¼ |
|------|------|--------|
| A (ç¦„) | ç»¿è‰² | `#10B981` |
| B (æƒ) | ç´«è‰² | `#8B5CF6` |
| C (ç§‘) | è“è‰² | `#3B82F6` |
| D (å¿Œ) | çº¢è‰² | `#EF4444` |

## ğŸ¨ CSS æ ·å¼è¯´æ˜

### å…³é”® CSS ç±»

```css
/* å®«ä½å¡ç‰‡ */
.palace-card { ... }
.palace-active { ... }

/* æ˜Ÿæ›œæ˜¾ç¤º */
.star { ... }
.star-vertical-name { ... }
.star-brightness-line { ... }
.star-sihua-line { ... }

/* ä¸­å®«æ ·å¼ */
.center-grid-merged { ... }
.center-info-block { ... }
.bazi-lines { ... }

/* å¤§è¿/æµå¹´æ ‡ç­¾ */
.palace-major-label { ... }
.palace-dayun-fixed { ... }
.palace-minor-label { ... }
```

### å¯¼å…¥æ ·å¼

åœ¨ä½¿ç”¨ç»„ä»¶çš„é¡µé¢ä¸­å¯¼å…¥ï¼š

```tsx
import '@/components/ziwei-v2/ziwei.css'
```

æˆ–åœ¨ `app/globals.css` ä¸­å…¨å±€å¯¼å…¥ï¼š

```css
@import '../components/ziwei-v2/ziwei.css';
```

## ğŸ”§ ç®—æ³•é›†æˆ

### å½“å‰çŠ¶æ€

- âœ… Mock æ•°æ®ç”Ÿæˆå™¨ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼‰
- â³ ziwei-core é›†æˆï¼ˆå¾…è¿æ¥ ref/ziwei-coreï¼‰

### é›†æˆ ziwei-core

ç¼–è¾‘ `lib/ziwei/integration-v2.ts`ï¼š

```typescript
// å–æ¶ˆæ³¨é‡Šä»¥å¯ç”¨çœŸå®ç®—æ³•
import { generateIntegratedChart } from '@/ref/ziwei-core/src/api/integrated-chart-api'

export async function generateWebZiweiChart(input: ZiweiCalculationInput) {
  const result = await generateIntegratedChart({
    year: input.year,
    month: input.month,
    day: input.day,
    hour: input.hour,
    gender: input.gender,
    isLunar: input.isLunar
  })

  return transformToWebFormat(result.hookChart)
}
```

## ğŸ“ å¸ƒå±€è¯´æ˜

### 4Ã—4 Grid å¸ƒå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·³å®«  â”‚  åˆå®«  â”‚  æœªå®«  â”‚  ç”³å®«  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è¾°å®«  â”‚                 â”‚  é…‰å®«  â”‚
â”‚        â”‚   ä¸­å®« 2Ã—2      â”‚        â”‚
â”‚        â”‚   å…«å­—ä¿¡æ¯      â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯å®«  â”‚                 â”‚  æˆŒå®«  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å¯…å®«  â”‚  ä¸‘å®«  â”‚  å­å®«  â”‚  äº¥å®«  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å®«ä½ CSS Grid æ˜ å°„

```css
.palace-å·³ { grid-column: 1; grid-row: 1; }
.palace-åˆ { grid-column: 2; grid-row: 1; }
/* ... */
.center-grid-merged {
  grid-column: 2 / 4;
  grid-row: 2 / 4;
}
```

## ğŸ› å·²çŸ¥é—®é¢˜

1. **å››åŒ–é£å®«ç®­å¤´**ï¼šå¾…å®ç° SVG ç®­å¤´ç»˜åˆ¶ç³»ç»Ÿ
2. **å¤§è¿/æµå¹´é€‰æ‹©å™¨**ï¼šå¾…åˆ›å»º `ZiweiSelectors.tsx` ç»„ä»¶
3. **åº•éƒ¨æ“ä½œæ **ï¼šå¾…åˆ›å»º `ZiweiBottomBar.tsx` ç»„ä»¶

## ğŸ“ TODO

- [ ] å®ç° `ArrowOverlay.tsx`ï¼ˆå››åŒ–é£å®«ç®­å¤´ï¼‰
- [ ] åˆ›å»º `ZiweiSelectors.tsx`ï¼ˆå¤§è¿/æµå¹´/æµæœˆé€‰æ‹©å™¨ï¼‰
- [ ] åˆ›å»º `ZiweiBottomBar.tsx`ï¼ˆä¸‰åˆã€å››åŒ–ã€åˆ†ææŒ‰é’®ï¼‰
- [ ] é›†æˆçœŸå® ziwei-core ç®—æ³•
- [ ] æ·»åŠ ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–ï¼ˆReact.memoã€useMemoï¼‰

## ğŸ“ å‚è€ƒæ–‡æ¡£

- **åŸå§‹å®ç°**ï¼š`ref/ziwei-ui/ZiweiChart/`
- **ç®—æ³•æ ¸å¿ƒ**ï¼š`ref/ziwei-core/src/`
- **ç±»å‹å®šä¹‰**ï¼š`ref/ziwei-ui/types.ts`

---

**Version**: V2.0.0
**Last Updated**: 2025-01-03
**Author**: Winston (BMad Architect)
**Status**: âœ… æ ¸å¿ƒç»„ä»¶å®Œæˆï¼Œ100% UI è¿˜åŸ
